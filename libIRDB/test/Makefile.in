

INCLUDES= -I ../../include -I../include/ -I../../beaengine/include 
LIBS=-L ../lib/ -lIRDB-core -lIRDB-cfg -lIRDB-util -lpqxx -L ../../beaengine/lib/`uname -s`.gnu.Debug -lBeaEngine_s_d 
OPT=-g @EXTRA_CXXFLAGS@
.SUFFIXES: .exe .cpp 

PROGS=print_variant.exe list_programs.exe create_variant.exe create_variantir.exe read_variantir.exe clone.exe ilr.exe \
	drop_variant.exe generate_spri.exe fill_in_cfg.exe fix_calls.exe fill_in_indtargs.exe unfix_calls.exe \
	find_strings.exe build_callgraph.exe build_preds.exe rename_function.exe

all: $(PROGS)

$(PROGS): ../../lib/*


fill_in_indtargs.exe: read_ehframe.o fill_in_indtargs.o check_thunks.o
	$(CXX) fill_in_indtargs.o read_ehframe.o check_thunks.o  $(INCLUDES) $(LIBS) $(OPT) -o $@


.o.exe:  $< ../lib/libIRDB-core.a ../lib/libIRDB-cfg.a
	$(CXX) $< $(INCLUDES) $(LIBS) $(OPT)  -o $@

.cpp.o:  $< 
	$(CXX) $< $(INCLUDES) $(LIBS) $(OPT) -o $@ -c

# shouldn't be needed anymore
#read_ehframe.o: read_ehframe.cpp
#	$(CXX) -w -fpermissive $(INCLUDES) $(LIBS)  $(OPT) $^ -o $@ -c

clean:
	rm -f $(PROGS) *.o
