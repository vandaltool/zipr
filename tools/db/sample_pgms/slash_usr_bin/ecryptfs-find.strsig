#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#    Authors: Dustin Kirkland <kirkland@ubuntu.com>
#!/bin/sh -e
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
case "$1" in
#    Copyright (C) 2011 Dustin Kirkland
#    Copyright (C) 2011 Sergio Mena de la Cruz
		direction="decrypt"
		direction="encrypt"
done < /proc/mounts
# Do the search
	echo "ERROR: [$1] not found" 1>&2
#    ecryptfs-find - use inode numbers to match encrypted/decrypted filenames
	*ECRYPTFS_FNEK_ENCRYPTED.*)
		find="$lower"
	find "$m/" -inum "$inum"
		find="$upper"
for m in "$mounts"; do
	[ "$fstype" = "ecryptfs" ] || continue
#    GNU General Public License for more details.
# Grab the target inode number
	if [ "$direction" = "encrypt" ]; then
if [ ! -e "$1" ]; then
	if [ -r "$find" ] && [ -x "$find" ]; then
inum=$(ls -aid "$1" | awk '{print $1}')
#    it under the terms of the GNU General Public License as published by
	# Match against filesystem or mountpoint, build list of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
mounts=${mounts## }
		mounts="$mounts $find"
	# mounts to search
# Process /proc/mounts
#             Sergio Mena de la Cruz
#    the Free Software Foundation, version 2 of the License.
#    This program is distributed in the hope that it will be useful,
#    This program is free software: you can redistribute it and/or modify
# Use one utility for both directions; same method is used
while read lower upper fstype opts dump pass; do
#    You should have received a copy of the GNU General Public License
