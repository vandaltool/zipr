                          $_;
                    }
                }
            }
        {
        }
    $"=" ";
    $"="";
##################################
###################################
#   2001/04/12 v0.1:
#   2001/04/13 v0.2:
#   2001/04/15 v0.3:
#   2001/04/16 v0.4:
#   2001/04/17 v0.5:
#   2001/04/20 v0.6:
#   2001/04/21 v0.7:
#   2001/04/23 v0.8:
#   2001/04/26 v0.9:
#   2001/06/30 v1.0:
#   2005/01/28 v1.1:
#   2005/01/29 v1.2:
#   2005/02/25 v1.3:
#   2007/11/07 v1.4:
#   2009/03/18 v1.5:
            # 5.62 is ok, 5.58 does not produce font comments
# after @start:
# and version 1.3 or later is part of all distributions of LaTeX
@ARGV == 2 or die "$usage$Error Missing file names!\n";
@ARGV < 3 or die "$usage$Error Too many files!\n";
*** ARGV: @OrgArgv
        # A wrong value will trigger a dvips warning
# before TeXDict line:
#   %%BeginFont: CMR10
        # Begin of page (bop)
        # Begin of postamble (post)
#   %%BeginProcSet: {file name}.enc 0 0
        binmode(OUT);
# bitmap font:
                    $bitmap_string .= $_;
        $blocks_found++;
#     * Bug fix: Detection of "@fedspecial end" improved.
#     * Bug fix: dvips font names can contain numbers.
#     * Bug fix: encoding files are now included also.
#     * Bug fix: I detection.
#     * Bug fix: long dvi file name in ps file.
#     * Bug fix: post string parsing.
#     * Bug fix: Typo corrected (PRT -> $PRT).
        # But other consequences could not be noticed.
          by the type 1 versions. The result is written in <outputfile.ps>.
#     * Call of kpsewhich with option --progname.
  \char#1\relax
# character, variant a:
# character, variant b:\
                $chars == $count or
#     * Check of version number of dvips in PostScript file.
                    chomp;
    chomp $file;
    chomp $lines[@lines-1];
    "clean!",
    close(IN);
close(IN);
        close(OUT);
close(OUT);
# conditions of the LaTeX Project Public License, either version 1.3
              " converted font",
# Copyright (C) 2001, 2005, 2007, 2009 Heiko Oberdiek.
                        $count++;
                    $count++;
  \csname font@#1\endcsname
#   \d+ \d+ \d+ \d+ \d+ \(\S+\) @start
#   \d+ \d+ \d+ \(\d+\) @start
    "debug!",
\def\Font#1#2#3#4{%
            # define font
\def\ScanChar#1,#2\NIL{%
#     * Deprecation warning of perl 5.8.8 fixed.
                die "!!! Error: Internal parsing error!\n";
            die "$Error Missing comment `%DVIPSParameters'!\n";
                    die "$Error Parse error, $count chars of $chars found " .
            die "$Error Parse error (\@start)!\n";
            die "$Error Parse error (\@start parameters)!\n";
            die "$Error Resolution values in comment and PostScript " .
            die "$Error Wrong resolution value " .
        # divide post part
                "does not match!\n";
            /\d+\s+\d+\s+\d+\s+(\d+)\s+(\d+)\s+\((.*)\)\s+\@start/ or
            /\d+\s+(\d+)\s+(\d+)\s+\@start/ or # dvips 5.399
                        ($dummy1, $font_txt{$fontname}, $dummy2, $err) =
            $DVI_comment_len, $DVI_comment);
        # DVI format description: dvitype.web
                $DVI_l, $DVI_u, 1, 1);
                $DVI_post, $pos_bop, $DVI_num, $DVI_den, $DVI_mag,
                $DVI_post_post, $pos_post, $DVI_id_byte,
            $DVI_pre, $DVI_id_byte, $DVI_num, $DVI_den, $DVI_mag,
#   %%DVIPSBitmapFont: {dvips font} {font name} {at x pt} {chars}
#   %DVIPSBitmapFont: (\S+) (\S+) ([\d\.]+) (\d+)
        #   dvips: Design size mismatch in [...].tfm
  --dvips dvipscmd  dvips command name                           ($::opt_dvips)
#   /{dvips font} {chars} {max. char number + 1} df
#   %%DVIPSParameters:... dpi=([\dx]+)...
            $dvips_resolution = "-D $x_resolution";
            $dvips_resolution = "-X $x_resolution -Y $y_resolution";
    "dvips=s",
        # dvips writes on stderr :-(
                $DVI_trailing, $DVI_trailing, $DVI_trailing, $DVI_trailing);
                    else {
                else {
            else {
        else {
    else {
            elsif ($font_num < 256) {
            elsif ($font_num < 65536) {
    elsif (/^TeXDict begin \d+ \d+ \d+ \d+ \d+/) {
    elsif (/^TeXDict begin \d+ \d+ \d+/) { # dvips 5.399
### Encoding definitions
        $encoding_files{$1} = "";
# Encoding files before texps.pro:
            $encoding_files{$encoding_file} = "";
              $encoding_string .= $_;
            $encoding_string .= $_;
#   ... end
#   %EndDVIPSBitmapFont
#   %%EndDVIPSBitmapFont
#   %%EndFont
        # End of postamble (post_post)
END_OF_USAGE
#   %%EndProcSet
#   %%EndProlog
                $entry .= "\}";
                        $entry .= "$num,";
                    $entry .= "$num,";
                $entry =~ s/,$//;
### environment variable PKFIX
$ENV{'MKTEXPK'} = "0";
                        $err == 0 or die "$Error Cannot merge font `$fontname'!\n";
              $err = 1;
#         $err:   error indication
### error strings
$err_redirect = "" if $^O =~ /dos/i ||
eval '(exit $?0)' && eval 'exec perl -S $0 ${1+"$@"}' && eval 'exec perl -S $0 $argv:q'
                    $exitvalue >>= 8;
                $exitvalue >>= 8;
  \expandafter\font\csname font@#1\endcsname=#2 at #3pt\relax
# expected format:
#     * Extracting of texps.pro from temporary PostScript file,
#   /Fa ... /CMR10 rf
              " failed.\n";
#   @fedspecial end
#   @fedspecial end TeXDict begin
#     * First release.
#     * First try.
                $fnt_num = pack("CC", $DVI_fnt1, $font_num);
                $fnt_num = pack("C", $DVI_fnt_num_0 + $font_num);
                $fnt_num = pack("Cn", $DVI_fnt2, $font_num);
                $fnt_num = pack("CN", $DVI_fnt4, $font_num);
                $font .= $_;
            $font .= $_;
    %font_count = ();
                        $font_count{$newfontname}++;
                        $font_count{$newfontname} = 1;
                $font_def = pack("CC", $DVI_fontdef1, $font_num);
                $font_def = pack("Cn", $DVI_fontdef2, $font_num);
                $font_def = pack("CN", $DVI_fontdef4, $font_num);
            $font_def .= pack("x[N]N2xCa$font_name_len",
            $font_defs .= $font_def;
    %font_entry = ();
                        $font_entry{$newfontname} = $entry;
                        $font_entry{$newfontname} .= "\n$entry";
#         $font:  font file as string
    @font_list = ();
                    $font_name_len, $font_name);
                        "($fontname)!\n";
# Font names: /[F-Z][a-zA-Z0-9]
            $font_num++;
            /\\Font\{[^}]*\}\{([^}]*)\}\{([^}]*)\}\{([^}]*)\}/ or
                    $fonts_converted++;
              (($fonts_converted > 0) ? $fonts_converted : "No"),
              (($fonts_converted > 1) ? "s" : ""),
                    ($font_size * 65536), $DVI_design_size,
                        $fonts_merged++;
                  (($fonts_merged > 1) ? "s" : ""),
                    $fonts_misses++;
              (($fonts_misses > 1) ? "s" : ""),
    %font_txt = ();
                        $font_txt{$newfontname} = $font_part;
                foreach (@capture) {
                foreach (@font_list) {
            foreach (split(",", $font_chars)) {
        foreach(split("\n", $entry)) {
# for installation purposes.
            $foundversion = $1;
Function: This program tries to replace pk fonts in <inputfile.ps>
        # get and check resolution values
    # get file name
### get file names
    ### get font and start part
                            get_font($font_entry{$fontname});
GetOptions(
        ### get possible encoding files
# get_texps_pro
### get texps.pro
        ### get texps.pro if get_texps_pro() has failed
# get type 1 font
  \hbox to 0pt{%
    "help!",
  --help            print usage
#   <{hex code}>{char number} D
#   [<{hex code}>{num1} {num2} {num3} {num4} {num5} {char number} D
# History:
    \hss
#   http://www.latex-project.org/lppl.txt
            if ($?) {
        if ($?) {
    if 0;
                if ($_ < 128) {
        if (/^%%BeginFont:\s*(\S+)/) {
        if (/^%%BeginProcSet:\s*(.+)\.enc/) {
    if (/^%%BeginProcSet:\s*(.+)\.enc/) {
    if (/^%%BeginProcSet: texps.pro/) {
    if ($blocks_found > 1) {
            if (!@capture) {
    if (/^%%Creator: (dvips\S*) (\S+)\s/) {
    if (!defined($file) or $file eq "") {
                    if (defined($font_count{$newfontname})) {
            if (/^%DVIPSBitmapFont: (\S+) (\S+) ([\d.]+) (\d+)/) {
    if (/^%DVIPSParameters:.*dpi=([\dx]+)/) {
            if (/^%%EndProlog/) {
if ($ENV{$envvar}) {
                if ($err == 0) {
                if ($exitvalue > 255) {
            if ($exitvalue > 255) {
            if (/^\@fedspecial end/) {
                    if ($font_count{$fontname} > 1) {
    if ($font eq "") {
            if ($font_num < 256) {
            if ($font_num < 64) {
    if ($fonts_converted) {
        if ($fonts_merged) {
    if ($fonts_misses) {
            if ($foundversion <= 5.58) {
        if ($foundversion =~ /(\d+\.\d+)/) {
#       if kpsewhich failed.
if ($::opt_clean) {
                        if $::opt_debug;
                if $::opt_debug;
            if $::opt_debug;
if ($::opt_debug) {
if (!$::opt_quiet) {
    if ($::opt_usetex) {
                    if $::opt_verbose;
            if ($::opt_verbose) {
        if ($::opt_verbose) {
#     * If output file is "-" (standard output) then messages of
        if (/^\@start/) {
            if (($start =~ s/\s*end\s*$/\n/) != 1) {
    if ($start_string ne "") {
        if ($str =~ /^(\d+)$/) {
        if ($str =~ /^(\d+)x(\d+)$/) {
    if (/^TeXDict begin \@defspecial/) {
        if ($texps_data == 0 && /^%%BeginProcSet: texps.pro/) {
  \ifx\\#2\\%
        if ($x_resolution == $y_resolution) {
$infile = $ARGV[0];
                init();
        # (it can be seen in verbose mode):
                last;
            last;
                    last if /^%EndDVIPSBitmapFont/;
                last if /^%%EndFont/;
              last if /^%%EndProcSet/;
                last if /^%%EndProlog/;
                last if /\@start/;
                    $line .= " " . $_;
                        $line = $1;
                    $line = $2;
                $line =~ s/<[0-9A-F ]*>/ /g;
    @lines > 0 or die "$Error: Empty file `$file'!\n";
    local *IN;
    local *OUT;
\long\def\ReturnAfterFi#1\fi{\fi#1}
        # look for @start
#     * LPPL 1.3
    map {unlink} @cleanlist;
# Melissa O'Neill reported small variations for dvips 5.399:
#     * Merging is now based on type 1 names. This solves
#       MKTEXPK is supported.
            # more than one font in the merging case only.
my $author      = "Heiko Oberdiek";
    my $backupWarn = $^W;
                my $bitmap_string = $_;
my $blocks_found    = 0;
my @bool = ("false", "true");
            my @capture = `$cmd`;
        my @capture = `$cmd$err_redirect`;
                my $chars = $4;
my @cleanlist = ($dvifile, $psfile);
        my $cmd = "$::opt_dvips $::opt_options $dvips_resolution $tempfile";
            my $cmd = "$::opt_tex $tempfile";
my $copyright   = "Copyright (c) 2001, 2005, 2007, 2009 by $author.";
                my $count = 0;
my $date        = "2009/03/18";
                    my ($dummy1, $dummy2, $err);
        my $DVI_bop = 139;
        my $DVI_checksum = 0; # because of unknown checksum
        my $DVI_comment_len = length($DVI_comment);
        my $DVI_comment = "$program $version output "
        my $DVI_den = 473628672; # 7227 * 2^16
        my $DVI_design_size = 10; # an arbitrary value
        my $DVI_eop = 140;
my $dvifile   = "$tempfile.dvi";
        my $DVI_fnt1 = 235;
        my $DVI_fnt2 = 236;
        my $DVI_fnt4 = 238;
        my $DVI_fnt_num_0 = 171;
        my $DVI_fontdef1 = 243;
        my $DVI_fontdef2 = 244;
        my $DVI_fontdef4 = 246;
        my $DVI_id_byte = 2;
        my $DVI_l = 67108864; # 1024 pt, an arbitrary value
        my $DVI_mag = 1000;
        my $DVI_num = 25400000;
        my $DVI_pop = 142;
        my $DVI_post = 248;
        my $DVI_post_post = 249;
        my $DVI_pre = 247;
                my $dvips_fontname = $1;
my $dvips_resolution = "";
        my $DVI_push = 141;
        my $DVI_set1 = 128;
        my $DVI_trailing = 223;
        my $DVI_u = 67108864; # 1024 pt, an arbitrary value
            my $encoding_file = $1;
my %encoding_files = ();
my $encoding_string = "";
                my $entry = "\\Font\{$1\}\{$2\}\{$3\}\{";
    my $entry = shift;
my $envvar    = uc($project);
    my $err = 0;
    my @err = ("", "", "", 1);
my $Error = "!!! Error:"; # error prefix
my $err_redirect = " 2>&1";
                my $exitvalue = $?;
            my $exitvalue = $?;
    my $file = `$::opt_kpsewhich $texpsfile`;
my $file        = "pkfix.pl";
            my $fnt_num;
    my $font = "";
            my $font_chars = $3;
my %font_count = ();
            my $font_def = "";
        my $font_defs = "";
my %font_entry = ();
my @font_list = ();
                    my $fontname = $_;
            my $font_name = $1;
                my $fontname = $2;
            my $font_name_len = length($font_name);
        my $font_num = 0;
my $fonts_converted = 0;
            my $font_size = $2;
my $fonts_merged    = 0;
my $fonts_misses    = 0;
my %font_txt = ();
        my $foundversion = $2;
my $infile    = "";
                my $line = "";
    my @lines = <IN>;
my $logfile   = "$tempfile.log";
my $missfile  = "missfont.log";
    my $name = "";
                my ($newfontname, $font_part, $start_part, $err) = get_font($entry);
                my $num = -1;
my @OrgArgv = @ARGV;
my $outfile   = "";
        my $pos_bop = tell(OUT);
        my $pos_post = tell(OUT);
my $post_string = "";
# my $prefix    = "_${project}_";
my $prefix    = "_${project}_$$";
my $program     = uc($&) if $file =~ /^\w+/;
my $project     = lc($program);
my $PRT = \*STDOUT;
my $psfile    = "$tempfile.ps";
        my $saved = $_;
    my $start = "";
my $start_string = "";
        my $str = $1;
    my $str = "%%BeginProcSet: texps.pro\n";
my $tempfile  = "$prefix";
my $texfile   = "$tempfile.tex";
my $texps_data   = 0;
my $texpsfile = "texps.pro";
my $texps_found = 0;
my $texps_string = get_texps_pro();
my $title = "$program $version, $date - $copyright\n";
        my @t = localtime(time);
        my $t_num = (4 - (tell(OUT) % 4)) % 4;
my $usage = <<"END_OF_USAGE";
my $version     = "1.5";
my $Warning = "!!! Warning:"; # warning prefix
my $x_comment_resolution = 0;
my $x_resolution    = 0;
my $y_comment_resolution = 0;
my $y_resolution    = 0;
                  ".\n";
              ".\n";
            $name = $1;
                next;
            next;
        next;
            next if defined($encoding_files{$encoding_file});
  --(no)clean       clear temp files                             ($bool[$::opt_clean])
  --(no)debug       debug informations                           ($bool[$::opt_debug])
\noindent
\nonstopmode
\nopagenumbers
  --(no)quiet       suppress messages                            ($bool[$::opt_quiet])
  --(no)usetex      use TeX for generating the DVI file          ($bool[$::opt_usetex])
  --(no)verbose     verbose printing                             ($bool[$::opt_verbose])
                        $num++;
                    $num = $1;
                      $^O =~ /cygwin/i;
# of this license or (at your option) any later version.
                      $^O =~ /mswin32/i ||
                      $^O =~ /os2/i ||
    open(IN, $file) or die "$Error: Cannot open `$file'!\n";
open(IN, $infile) or die "$Error Cannot open `$infile'!\n";
    open(IN, $psfile) or die "$Error Cannot open `$psfile'!\n";
### open input and output files
        open(OUT, ">$dvifile") or die "$Error Cannot write `$dvifile'!\n";
open(OUT, ">$outfile") or die "$Error Cannot write `$outfile'!\n";
        open(OUT, ">$texfile") or die "$Error Cannot write `$texfile'!\n";
$::opt_clean = 0 if $::opt_debug;
$::opt_clean      = 1;
$::opt_debug      = 0;
$::opt_dvips      = "dvips";
$::opt_help       = 0;
!$::opt_help or die $usage;
#     * Option -G0 for dvips run added.
Options:                                                         (defaults:)
  --options opt     dvips options                                ($::opt_options)
    "options=s"
### option variables
$::opt_kpsewhich  = "kpsewhich --progname $project";
$::opt_options    = "-Ppdf -G0";
$::opt_quiet      = 0;
$::opt_quiet = 0 if $::opt_verbose;
$::opt_tex        = "tex";
$::opt_usetex     = 0;
$::opt_verbose    = 0;
) or die $usage;
# or if \special{!...} was used, the lines with TeXDict:
*** OSNAME: $^O
            # Other cases are unlikely, see above.
$outfile = $ARGV[1];
# param:  $entry: font entry as TeX string
#     * Patch to support dvips 5.399 (submitted by Melissa O'Neill).
*** PERL_VERSION: $]
#       pkfix are written to standard error output.
# pkfix.pl
                          $post_string,
            $post_string .= $_;
        $post_string = $2;
        $post_string .= "\n" unless $post_string eq "";
        $post_string =~ s/\s*$//;
        # Preamble (pre)
            # print characters
        print OUT;
    print OUT;
                print OUT $encoding_string;
        print OUT "$entry\n\\bye\n";
            print OUT $fnt_num;
            print OUT $font_def;
        print OUT $font_defs;
                    print OUT $font_txt{$fontname};
                    print OUT pack("C", $_);
        print OUT pack("C2N3Ca$DVI_comment_len",
                    print OUT pack("CC", $DVI_set1, $_);
        print OUT pack("C", $DVI_eop);
            print OUT pack("C", $DVI_pop);
            print OUT pack("C", $DVI_push);
        print OUT pack("C", $DVI_trailing) x $t_num;
        print OUT pack("CN1x[N9]l", $DVI_bop, 1, -1);
        print OUT pack("CN6n2",
        print OUT pack("CNC5",
                print OUT $start_string,
        print OUT <<'TEX_HEADER';
                print OUT $texps_string unless $texps_found;
        print $PRT "==> ",
                    print $PRT "*** Adding font `$fontname'\n"
        print $PRT "==> $blocks_found blocks.\n";
                print $PRT @capture;
            print $PRT @capture;
    print $PRT "*** clear temp files\n" if $::opt_verbose;
            print $PRT ">>> $cmd\n" if $::opt_verbose;
        print $PRT ">>> $cmd\n" if $::opt_verbose;
        print $PRT "*** %%Creator: $1 $2\n" if $::opt_debug;
        print $PRT "*** \@defspecial found.\n" if $::opt_debug;
        print $PRT "*** dvi file: $3\n" if $::opt_debug and defined $3;
        print $PRT "*** %DVIPSParameters: dpi=$str " .
            print $PRT "*** encoding file `$encoding_file.enc' found.\n"
    print $PRT <<"END_DEB";
                print $PRT "*** %%EndProlog\n" if $::opt_debug;
                    print $PRT "!!! Failed font conversion of `$fontname'!\n";
                print $PRT "*** Font $1: $2 at $3pt, $4 chars\n" if $::opt_verbose;
                    print $PRT "*** Font conversion: `$fontname' -> `$newfontname'.\n"
                print $PRT "*** Font conversion of `$fontname' started.\n"
                print $PRT "*** <Font> $line\n" if $::opt_debug;
            print $PRT "==> $fonts_merged merged font",
        print $PRT "==> $fonts_misses font conversion",
                    print $PRT if /^!\s/;
print $PRT "*** input file: `$infile'\n" if $::opt_verbose;
                        print $PRT "*** Merging font `$fontname' ($font_count{$fontname}).\n"
        print $PRT "==> no fonts converted\n";
print $PRT "*** output file: `$outfile'\n" if $::opt_verbose;
        print $PRT "*** resolution: $x_resolution x $y_resolution\n"
        print $PRT "*** run dvips\n" if $::opt_verbose;
            print $PRT "*** run TeX\n" if $::opt_verbose;
            print $PRT "*** start: $start" if $::opt_debug;
        print $PRT "*** TeXDict begin <3 nums> found.\n" if $::opt_debug;
        print $PRT "*** TeXDict begin <5 nums> found.\n" if $::opt_debug;
            print $PRT "*** texps.pro extracted.\n" if $::opt_debug;
    print $PRT "*** texps.pro: $file\n" if $::opt_debug;
        print $PRT "*** texps.pro found\n" if $::opt_debug;
print $PRT $title unless $::opt_quiet;
        print $PRT "$Warning `%%BeginFont' not found!\n";
                print $PRT "$Warning Cannot execute TeX!\n";
        print $PRT "$Warning: Cannot find `$texpsfile' with kpsewhich!\n"
                print $PRT "$Warning Closing dvips (exit status: $exitvalue)!\n";
            print $PRT "$Warning Closing dvips ($exitvalue)!\n";
                    print $PRT "$Warning Closing TeX (exit status: $exitvalue)!\n";
                print $PRT "$Warning Closing TeX ($exitvalue)!\n";
                print $PRT "$Warning dvips version $1 does not generate " .
              print $PRT "$Warning Parse error, `end' not found!\n";
#     * Problem with DOS line endings fixed.
### process options
### program identification
$PRT = \*STDERR if $outfile eq "-";
push(@cleanlist, $missfile) unless -f $missfile;
push(@cleanlist, $texfile, $logfile) if $::opt_usetex;
                        push @font_list, $newfontname;
    "quiet!",
    # read file
#     * Redirection of stderr (dvips run) if possible.
# Reqirements: Perl5, dvips
        return "";
    \ReturnAfterFi{%
                    return @err;
                return @err;
            return @err;
        return @err;
    return ($name, $font, $start, $err);
# return: $name:  type 1 font name
    return $str;
# return: string with content of texps.pro
    ### run dvips
        ### run tex
#   /(\S+) ...
#       same type 1 font, eg. (ecrm1000, larm1000) -> SFRM1000.
      \ScanChar#2\NIL
    \ScanChar#4,\NIL
# See file "README" for a list of files that belongs to this project.
        # setting dvips resolution option(s)
                s/^\@fedspecial end\s*(\S)/$1/;
#     * \special{!...}/@fedspecial detection added.
                . sprintf("%04d/%02d/%02d %02d:%02d:%02d",
                    s/\r$//; # remove \r of possible DOS line ending
            s/^\@start\s*//;
                $start .= $_;
            $start .= $_;
#   @start ...
# start:
#         $start: font definition after @start
                    $start_part =~ s/\/Fa/\/$dvips_fontname/;
                $start_string .= $_;
            $start_string .= $_;
        $start_string =~
        $start_string = $_;
    $start_string = "";
        $start_string = "$1\n";
                    $start_string .= $bitmap_string;
        $start_string =~ /^([\s\S]*\@start)\s*([\s\S]*)$/ or
                    $start_string .= $start_part;
    $str .= "%%EndProcSet\n";
    $str .= "@lines\n";
sub get_font {
sub get_texps_pro {
sub init {
#     * Support for merging PostScript fonts added.
#     * Suppression of PK generation, if environment variable
### suppress PK generation
                ($t[5] + 1900), ($t[4] + 1), $t[3], $t[2], $t[1], $t[0]);
#   TeXDict begin \d+ \d+ \d+
#   TeXDict begin \d+ \d+ \d+ \d+ \d+ \(\S+\)
#   TeXdict begin @defspecial
#     * TeX/dvips is called for each font for the case of errors.
TEX_HEADER
    $texps_data = 0;
                $texps_data > 0 or die "$Error File `texps.pro' not found!\n";
            $texps_data = 1;
    $texps_data = 1;
    $texps_found = 0;
        $texps_found = 1;
              $texps_string .= $_;
            $texps_string = $_;
    "tex=s",
  --tex texcmd      tex command name (plain format)              ($::opt_tex)
#     * The intermediate DVI files are written directly.
# The latest version of this license is in
            # The other cases are very unlikely, especially there are
#       the problem, if different bitmap fonts maps to the
                           "the required font comments!\n";
# This Current Maintainer of this work is Heiko Oberdiek.
# This file "pkfix.pl" may be renamed to "pkfix"
# This work has the LPPL maintenance status "maintained".
# This work may be distributed and/or modified under the
        # Thus a TFM lookup will be saved.
${title}Syntax:   \L$program\E [options] <inputfile.ps> <outputfile.ps>
# type 1 font:
                            unless $::opt_quiet;
                        unless $::opt_quiet;
        unless (/\@start/) {
    unshift(@ARGV, split(/\s+/, $ENV{$envvar}));
            # use font
use Getopt::Long;
use strict;
    "usetex!",
### variables
    "verbose!",
# version 2003/12/01 or later.
    $^W = 0;
$^W=1; # turn warning on
    $^W = $backupWarn;
                while (<IN>) {
            while (<IN>) {
        while (<IN>) {
    while (<IN>) {
while (<IN>) {
                    while ($line =~ /^[\s\d\[]*I(.*)/) {
                while ($line =~ /\s(\d+)\s+D(.*)/) {
        # write dvi directly
        ### write temp tex file
        $x_comment_resolution = 0;
    $x_comment_resolution = 0;
        $x_comment_resolution > 0 or
        $x_comment_resolution > 0 && $y_comment_resolution > 0 or
            $x_comment_resolution = $1;
                "($x_comment_resolution x $y_comment_resolution)!\n";
    $x_resolution = 0;
        $x_resolution = $1;
        $x_resolution == $x_comment_resolution &&
                   "(x=$x_comment_resolution, y=$y_comment_resolution)\n"
        $y_comment_resolution = 0;
    $y_comment_resolution = 0;
            $y_comment_resolution = $1;
            $y_comment_resolution = $2;
    $y_resolution = 0;
        $y_resolution = $2;
        $y_resolution == $y_comment_resolution or
