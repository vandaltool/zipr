        argv = sys.argv
    data = fo.read()
def main(argv=None):
def render(data):
    else:
        filename = args[0]
        fo = open(filename)
        fo = stdin
    from mako.lookup import TemplateLookup
    from mako.template import Template
    from optparse import OptionParser
    from os.path import isfile
    from sys import stdin
    if argv is None:
    if (len(args) == 0) or (args[0] == "-"):
    if len(args) not in (0, 1):
if __name__ == "__main__":
        if not isfile(filename):
        import sys
    lookup = TemplateLookup(["."])
    main()
    opts, args = parser.parse_args(argv[1:])
        parser.error("wrong number of arguments") # Will exit
    parser = OptionParser("usage: %prog [FILENAME]")
    print render(data)
            raise SystemExit("error: can't find %s" % filename)
    return Template(data, lookup=lookup).render()
#!/usr/bin/python
