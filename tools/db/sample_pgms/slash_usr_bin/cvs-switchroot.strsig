 2005, 2008, 2011
 and WITHOUT WARRANTY of any kind, to
# are retained or reproduced in an accompanying document, permission
	arg[i++]=$(realpath "$name")
#!/bin/mksh
# Change CVSROOT of a checked out tree (and save space with it)
	chmod 664 "$T"
# Copyright 
		cp "$T" "$name"
# damage or existence of a defect, except proven that it results out
# direct, other damage, loss, or other issues arising in any way out
	[[ -d $newroot ]] && if [[ -d $newroot/CVS ]]; then
	elif cat "$T" >"$U" && ln -f "$U" "$name"; then
		exit 1
find "${arg[@]}" -path \*/CVS/$fn -print0 |&
	fn=Root
for name in "$@"; do
 Glaser <tg@mirbsd.org>
if [[ $1 = -T ]]; then
if [[ $newroot = - ]]; then
	if ! rm "$name"; then
if ! T="$(mktemp ${arg[0]}/$me.XXXXXXXXXX)"; then
if (( !useroot )); then
if (( useroot )); then
if [[ -z $newroot || $newroot = -? ]]; then
# implied; without malicious intent or gross negligence. In no event
# is granted to deal in this work without restriction, including un
let rv=0
# limited rights to use, publicly perform, distribute, sell, modify,
	ln -f "$T" "$name" || if ! U="$(mktemp ${arg[0]}/$me.XXXXXXXXXX)"; then
	ln "$newroot" "$T" || cp "$newroot" "$T"
# may a licensor, author or contributor be held liable for indirect,
me=${0##*/}
# merge, give away, or sublicence.
mirabilos
# $MirOS: contrib/hosted/tg/deb/cvs/debian/cvs-switchroot,v 1.1 2011/06/10 23:44:12 tg Exp $
newroot=$1
		newroot=$newroot/CVS/$fn
		newroot=$newroot/$fn
	newroot=$(realpath "$1")
# of dealing in the work, even if advised of the possibility of such
# of said person
	print -r -- "$newroot" >"$T"
		print -u2 "$me: error: cannot rm <$name>"
	print -u2 "$me: fatal: cannot mktemp"
	print -u2 "Syntax: $me newroot [dir [...]]"
	print -u2 "\t$me - .../CVS/Root [dir [...]]"
	print -u2 "\t$me -T - .../CVS/Tag [dir [...]]"
# Provided that these terms and disclaimer and all copyright notices
# realpath(2)ise arguments
		rm -f "$T"
	rm -f "$T"
		rm -f "$U"
set -A arg
s immediate fault when using the work as intended.
	tagmode=
	tagmode=-T
# the utmost extent permitted by applicable law, neither express nor
# This work is provided 
#	Thorsten 
trap 'rm -f "$T"; exit 0' 0
trap 'rm -f "$T"; trap - EXIT; exit 1' 1 2 3 5 13 15
		T="$U"
useroot=0
	useroot=1
while IFS= read -d '' -pr name; do
# With option -T: change Tag instead of Root
[[ -z $1 ]] && set -- .
