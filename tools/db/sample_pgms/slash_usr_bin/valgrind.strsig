#!/bin/sh -e
DBGPATH=/usr/lib/debug
# Default Debian debug libraries.
exec $0.bin "$@"
export GLIBCPP_FORCE_NEW=1
export GLIBCXX_FORCE_NEW=1
	export LD_LIBRARY_PATH=$DBGPATH
	export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$DBGPATH
	export VALGRIND_OPTS="$VALGRIND_OPTS --suppressions=/usr/lib/valgrind/debian-libc6-dbg.supp"
# Force C++ STL to use malloc and to free memory by disabling 
# For gcc < 3.4 versions
# For gcc >= 3.4 versions
if [ -d /usr/lib/debug ] && ! echo "${VALGRIND_OPTS}" | fgrep -q -- '--suppressions=/usr/lib/valgrind/debian-libc6-dbg.supp'; then
if [ -z "$LD_LIBRARY_PATH" ]; then
# memory caching.
# Use debug libraries if found.
# Use 'exec' to avoid having another shell process hanging around.
# Use special suppression file if libc6-dbg is installed
# Valgrind wrapper
