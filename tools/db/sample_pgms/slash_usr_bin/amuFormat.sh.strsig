#  10-12-2003    lct   created
1GBCARD-FW)
#                $2:   Drive character (b:, c:)
32MBCARD-FW)
64MBCARD-FW)
64MBCARDSAN)
8MBCARD-FW)
# along with Mtools.  If not, see <http://www.gnu.org/licenses/>.
#  amuFormat.sh  Formats various types and sizes of PC-Cards, according to the
#  AMU-specification
# (at your option) any later version.
	[bB]:) drive="f:" ;;
#!/bin/sh
# but WITHOUT ANY WARRANTY; without even the implied warranty of
case "$1" in
	case "$2" in
	[cC]:) drive="g:" ;;
# Copyright 2004 Feuz Stefan.
# Copyright 2007 Adam Tkac.
	cylinders=2327 heads=16 cluster_size=64
	cylinders=245 heads=2 cluster_size=8
	cylinders=489 heads=4 cluster_size=4
	cylinders=489 heads=8 cluster_size=4
drive="$2"
echo "amuFormat $vers started..."
	echo "Card not supported."
	echo "<Card Type> has to be defined in amuFormat.sh itself" >&2
#echo "debug: $0,$1,$2,$3,$4"
echo "done."
	*) echo "Drive $2 not supported."; exit 1 ;;
	echo "<drive> has to be defined in mtools.conf" >&2
echo "Formatting card in slot $2 as $1"
	echo "Usage: amuFormat.sh <Card Type> <drive>" >&2
	echo "***** WARNING: untested on AvHMU *****"
	echo "***** WARNING: untested on AvHMU, exiting *****"
	# from amu_toolkit_0_6:
	#from amu_toolkit_0_6:
# GNU General Public License for more details.
if [ $# -ne 2 ] ; then
## initialise partition table
# insert new cards here...
# it under the terms of the GNU General Public License as published by
# main()
mdir  "$2"
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
mformat -c$cluster_size -v "$1" "$drive"
	#mformat -t2327 -h16 -c64 -n63 -H63 -r32 -v AMU-CARD -M512 -N 0000 c:
	#mformat -t489 -h4 -c4 -n32 -H32 -r32 -vPC-CARD -M512 -N0000 c:
	#mformat -t489 -h8 -c4 -n32 -H32 -r32 -v AMU-CARD -M512 -N 0000 c:
minfo "$2"
mpartition -c -t$cylinders -h$heads -s32 -b32 "$drive"
mpartition -I "$drive"
# Mtools is distributed in the hope that it will be useful,
# Mtools is free software: you can redistribute it and/or modify
#  parameters:   $1:   Card Type: The Card Type is written as disk/volume-label
	## see mtools.conf file...
# the Free Software Foundation, either version 3 of the License, or
#                      The string should have a length of max. 11 characters.
# This file is part of mtools.
#                      to the boot-record
	## using the f: or g: drive for fat12 formatting...
vers=1.4
# write a partition table
## write boot-record, two FATs and a root-directory
# You should have received a copy of the GNU General Public License
