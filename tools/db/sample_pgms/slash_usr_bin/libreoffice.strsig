            ;;
        *)
#*************************************************************************
# (a copy is included in the LICENSE file that accompanied this code).
                # another valgrind tool might be forced via the environment variable
        --backtrace)
#!/bin/sh
# but WITHOUT ANY WARRANTY; without even the implied warranty of
    case "$1" in
    case "$arg" in
case "`uname -s`" in
    cd "`dirname "$sd_res"`"
cd "`dirname "$sd_res"`"
cd "$sd_cwd"
                checks="c$checks"
# Copyright 2000, 2010 Oracle and/or its affiliates.
# count number of selected checks; only one is allowed
# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
# do not pass the request for command line help to oosplash
                echo "Error: Can't find the tool \"gdb\", --backtrace option will be ignored."
                echo "Error: Can't find the tool \"strace\", --strace option will be ignored."
                echo "Error: Can't find the tool \"valgrind\", --valgrind option will be ignored"
    echo "Error: The debug options --backtrace, --strace, and --valgrind cannot be used together."
    echo "       Please, use them one by one."
    echo "redirecting the standard and the error output to valgrind.log"
            else
    esac
    exec $GDBTRACECHECK "$sd_prog/soffice.bin" "$@"
exec $VALGRINDCHECK $STRACECHECK "$sd_prog/oosplash" "$@"
    exec &>valgrind.log
            exit 0
                exit 1
                exit 1;
    exit 1;
                    export GLIBCXX_FORCE_NEW=1
                    export G_SLICE=always-malloc
        export JAVA_HOME
    export LD_LIBRARY_PATH
    export LIBPATH
export PYTHONPATH
export SAL_ENABLE_FILE_LOCKING
# export STAR_PROFILE_LOCKING_DISABLED
            fi
                fi
# file locking now enabled by default
                # finally set the valgrind check
# for a copy of the LGPLv3 License.
for arg in $@ $VALGRINDOPT ; do
# force the --valgrind option if the VALGRIND variable is set
GDBTRACECHECK=
                GDBTRACECHECK="gdb -nx --command=$sd_prog/gdbtrace --args"
# GNU Lesser General Public License version 3 for more details
        -h | --h | --he | --hel | --help)
# <http://www.openoffice.org/license.html>
if echo "$checks" | grep -q "cc" ; then
if [ -e $sd_prog/ooenv ] ; then
if [ -n "$GDBTRACECHECK" ] ; then
    if [ -n "${JAVA_HOME}" ]; then
if [ -n "$VALGRINDCHECK" ] ; then
if test "$#" -eq 1; then
                if [ "$VALGRIND" = "memcheck" ] ; then
                if [ "$valgrind_ver_maj" -gt 3 -o \( "$valgrind_ver_maj" -eq 3 -a "$valgrind_ver_min" -ge 6 \) ] ; then
            if which gdb >/dev/null 2>&1 ; then
            if which strace >/dev/null 2>&1 ; then
            if which valgrind >/dev/null 2>&1 ; then
# it under the terms of the GNU Lesser General Public License version 3
    JAVA_HOME=$(javaPathHelper -h libreoffice-java 2> /dev/null)
    LD_LIBRARY_PATH=$sd_prog1:$sd_prog2${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
    LIBPATH=$sd_prog:$sd_prog/../ure-link/lib${LIBPATH:+:$LIBPATH}
# linked build needs additional settings
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
NetBSD|OpenBSD|FreeBSD|DragonFly)
# only, as published by the Free Software Foundation.
# oosplash does the rest: forcing pages in, javaldx etc. are
# OpenOffice.org - a multi-platform office productivity suite
# OpenOffice.org is distributed in the hope that it will be useful,
# OpenOffice.org is free software: you can redistribute it and/or modify
PYTHONPATH=$sd_prog${PYTHONPATH+:$PYTHONPATH}
# resolve installation directory
# run soffice.bin directly when you want to get the backtrace
# SAL_ANTIALIAS_DISABLE=true; export SAL_ANTIALIAS_DISABLE
SAL_ENABLE_FILE_LOCKING=1
# SAL_NOOPENGL=true; export SAL_NOOPENGL
# SAL_NO_XINITTHREADS=true; export SAL_NO_XINITTHREADS
    sd_basename=`basename "$sd_res"`
sd_cwd=`pwd`
    sd_prog1="$sd_prog"
    sd_prog2="$sd_prog/../ure-link/lib"
    . $sd_prog/ooenv
sd_prog=`pwd`
            "$sd_prog/soffice.bin" --help
            "$sd_prog/soffice.bin" --version
sd_res=$0
    sd_res=`ls -l "$sd_basename" | sed "s/.*$sd_basename -> //g"`
# STAR_PROFILE_LOCKING_DISABLED=1
        --strace)
STRACECHECK=
                STRACECHECK="strace -o strace.log -f -tt -s 256"
            test -n "$VALGRINDCHECK" && continue;
test -n "$VALGRIND" && VALGRINDOPT="--valgrind" || VALGRINDOPT=
                test -z "$VALGRIND" && VALGRIND="memcheck"
# This file is part of OpenOffice.org.
# this is a temporary hack until we can live with the default search paths
                # --trace-children-skip is pretty useful but supported only with valgrind >= 3.6.0
# try to get some debug output?
# uncomment line below if you encounter problems starting soffice on your system
# uncomment line below to disable anti aliasing of fonts
# Uncomment the line below if you suspect that OpenGL is not
         --valgrind)
VALGRINDCHECK=
                VALGRINDCHECK="valgrind --tool=$VALGRIND --trace-children=yes $valgrind_skip --num-callers=50 --error-exitcode=101"
# valgrind --log-file=valgrind.log does not work well with --trace-children=yes
                valgrind_skip=
                    valgrind_skip='--trace-children-skip=*/java'
                valgrind_ver_maj=`echo $valgrind_ver | awk -F. '{ print \$1 }'`
                valgrind_ver_min=`echo $valgrind_ver | awk -F. '{ print \$2 }'`
                valgrind_ver=`valgrind --version | sed -e "s/valgrind-//"`
# version 3 along with OpenOffice.org.  If not, see
        -V | --v | --ve | --ver | --vers | --versi | --versio | --version)
while [ -h "$sd_res" ] ; do
# working on your system.
# You should have received a copy of the GNU Lesser General Public License
