# 1) Prevent recursion, and multiple sourcing of profiles with the BYOBU_SOURCED_PROFILE environment variable.
# 2) Respect environment variables (LC_BYOBU and BYOBU_DISABLE) passable over SSH to disable
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#    And in your local bashrc:
				# Attempt to merge shell history across sessions/windows (works with a few exceptions)
#    Authors: Dustin Kirkland <kirkland@ubuntu.com>
#!/bin/sh -e
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    byobu-launch - call the launcher if we're in an interactive shell
#    Byobu launch.  This puts that configurability on the SSH client,
	. "${BYOBU_PREFIX}/lib/${PKG}/include/common"
	BYOBU_SOURCED_PROFILE=1
		case "$-" in
#    Copyright (C) 2010 Canonical Ltd.
	# Don't autolaunch byobu on serial consoles
	echo "INFO: Disabling auto-launch of Byobu on this serial console"
	echo "INFO: You can still run 'byobu' manually at the command line"
elif [ "$BYOBU_SOURCED_PROFILE" != "1" ] && [ "$LC_BYOBU" != "0" ] && [ "$BYOBU_DISABLE" != "1" ] && [ -O "$HOME" ]; then
				elif command -v setopt >/dev/null; then
					else
	# Ensure that autolaunch is not explicitly disabled
						exit 0
#    GNU General Public License for more details.
#      $HOME/.bashrc:  export BYOBU_DISABLE=1
#      $HOME/.bashrc:  export LC_BYOBU=0
				if byobu-launcher; then
				if command -v shopt >/dev/null; then
					if [ -e "$BYOBU_CONFIG_DIR/no-logout-on-detach" ] || [ -e "$BYOBU_RUN_DIR/no-logout" ]; then
	if [ ! -r "$BYOBU_CONFIG_DIR/disable-autolaunch" ]; then
if [ "${_tty#/dev/ttyS}" != "$_tty" ]; then
#    in addition to the server.
#    it under the terms of the GNU General Public License as published by
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    must pass this variable with AcceptEnv and SendEnv.
#    Note that LC_* are passed by default on Debian/Ubuntu, we'll optionally
				[ -n "$PROMPT_COMMAND" ] && PROMPT_COMMAND="$PROMPT_COMMAND;history -a;history -r" || PROMPT_COMMAND="history -a;history -r"
#    or edit your sshd_config, ssh_config, and set:
	PKG="byobu"
	[ -r "$HOME/.byoburc" ] && . "$HOME/.byoburc"
						rm -f "$BYOBU_RUN_DIR/no-logout"	# Remove one-time no-logout flag, if it exists
					setopt appendhistory
					shopt -s histappend || true
					sleep 0.1
				# Source profile, if necessary
#    support LC_BYOBU=0
					# Support zsh too
#    the Free Software Foundation, version 3 of the License.
						# The user does not want to logout on byobu detach
#    This program is distributed in the hope that it will be useful,
#    This program is free software: you can redistribute it and/or modify
#    To use over SSH, your /etc/ssh/sshd_config and /etc/ssh/ssh_config
						true
_tty=$(tty)
	unset _tty
unset _tty
# vi: syntax=sh ts=4 noexpandtab
					# Wait very briefly for the no-logout flag to get written?
	# You can certainly run 'byobu' manually, though
#    You should have received a copy of the GNU General Public License
	[ -z "${BYOBU_PREFIX}" ] && export BYOBU_PREFIX="/usr" || export BYOBU_PREFIX
				[ -z "$_byobu_sourced" ] && [ -r "$HOME/.profile" ] && . "$HOME/.profile"
