# 02111-1307, USA.
# along with this program; if not, write to the Free Software
# any later version.
  /bin/chmod 700 $tmpfile
      /bin/rm -f $tmp
#!/bin/sh
    (/bin/sleep 5; /bin/rm -f $tmpfile) 2>/dev/null &
    (/bin/sleep 5; /bin/rm -f $tmpfile "/tmp/$prog") 2>/dev/null &
    break
# but WITHOUT ANY WARRANTY; without even the implied warranty of
    bzip2 -cv9 "$i" >> $tmp || {
  bzip2 | tail | sed | chmod | ln | sleep | rm)
  case "`basename $i`" in
case `echo foo | $tail -n +1 2>/dev/null` in
    chmod u-w $i 2>/dev/null
      chmod u+w $tmp 2>/dev/null
    continue
      continue
# Copyright (C) 1993 Jean-loup Gailly
# Copyright (C) 1998, 2002 Free Software Foundation
  cpmod=${CPMOD-cpmod}
    $cpmod "$i~" "$i" 2>/dev/null
    cp -p "$i" $tmp 2>/dev/null || cp "$i" $tmp
decomp=0
  decomp=1
    # decompression
  echo Cannot decompress $0; exit 1
  echo cannot find tail
  echo compress executables. original file foo is renamed to foo~
  echo   "   -d  decompress the executables"
echo hi > zfoo1$$ || exit 1
echo hi > zfoo2$$ || exit 1
  echo usage: ${x} [-d] files...
    echo ${x}: cannot backup $i as $i~
    echo ${x}: cannot create $i
      echo ${x}: compression not possible for $i, file unchanged.
    echo "${x}: $i has setgid permission, unchanged"
    echo "${x}: $i has setuid permission, unchanged"
      echo "${x}: $i is already gzexe'd"
    echo ${x}: $i not a file
      echo ${x}: $i probably not in gzexe format, file unchanged.
	echo "${x}: $i would depend on itself"; continue ;;
  elif test $writable -eq 0; then
    else
      eval `sed -e 1d -e 2q "$i"`
# executable with the original name (for programs looking at their name).
  exit 1
exit $res
fi; exit $res
foo) tail="$tail -n";;
for dir in $PATH; do
for i do
# For safety reasons, gzexe will not create setuid or setgid shell scripts.
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
# GNU General Public License for more details.
# gzexe: compressor for Unix executables.
  if /bin/ln -T $tmpfile "/tmp/$prog" 2>/dev/null; then
  if ls -l "$i" | grep '^......[sS]' > /dev/null; then
  if ls -l "$i" | grep '^...[sS]' > /dev/null; then
    if sed -e 1d -e 2q "$i" | grep "^skip=[0-9]*$" >/dev/null; then
IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
IFS="$saveifs"
if tail +$skip "$0" | /bin/bzip2 -cd >> $tmpfile; then
    if tail +$skip "$i" | bzip2 -cd > $tmp; then
if test $# = 0; then
  if test $decomp -eq 0; then
  if test -f $dir/tail; then
  if test ! -f "$i" ; then
  if test -n "$cpmod"; then
    if test -w $tmp 2>/dev/null; then
if test "x$1" = "x-d"; then
if test -z "`(${CPMOD-cpmod} zfoo1$$ zfoo2$$) 2>&1`"; then
  if test -z "$cpmod"; then
if test -z "$tail"; then
# it under the terms of the GNU General Public License as published by
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  mv "$i" "$i~" || {
  mv $tmp "$i" || cp -p $tmp "$i" 2>/dev/null || cp $tmp "$i" || {
# On Ultrix, /bin/sh is too buggy, change the first line to: #!/bin/sh5
PATH="/usr/bin:$PATH"
  prog="`echo $0 | /bin/sed 's|^.*/||'`"
      res=1
    res=1
  rm -f "$i~"
    rm -f $tmp
  rm -f $tmp
rm -f zfoo[12]$$
    sed 1q $0 >> $tmp
    sed "s|^if tail|if $tail|" >> $tmp <<'EOF'
    skip=23
# skipping $skip lines of shell commands.  We try invoking the compressed
    tail="$dir/tail"
test "$x" = "ungzexe" && decomp=1
  test -z "$dir" && dir=.
# The compressed version is a shell script which decompresses itself after
# the Free Software Foundation; either version 2, or (at your option)
# The : is required for some old versions of csh.
# This program is distributed in the hope that it will be useful,
# This program is free software; you can redistribute it and/or modify
: > $tmp || exit 1
    $tmpfile ${1+"$@"}; res=$?
tmpfile=`tempfile -p gztmp -d /tmp` || exit 1
tmp=gz$$
    /tmp/"$prog" ${1+"$@"}; res=$?
    : >| $tmp  # truncate the file, ignoring set -C
    trap '/bin/rm -f $tmpfile; exit $res' 0
    trap '/bin/rm -f $tmpfile "/tmp/$prog"; exit $res' 0
trap "rm -f $tmp; exit 1" HUP INT QUIT TRAP USR1 PIPE TERM
umask 77
  umask $umask
umask=`umask`
# Use this only for binaries that you do not use frequently.
# WARNING: the first line of this file must be either : or #!/bin/sh
# We also try to retain the original file permissions on the compressed file.
      writable=0
      writable=1
x=`basename $0`
# You should have received a copy of the GNU General Public License
